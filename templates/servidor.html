<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Servidor</title>
</head>
<body>
    {% if mensaje %}
        <h1>{{ mensaje }}</h1>
    {% else %}
        <h2>Productos disponibles</h2>
        <span>Tu ip es: {{ ip }}</span>

    <table>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Cantidad</th>
        <th>Precio</th>
      </tr>
    {% for p in productos %}
    <tr>
        <td>{{ p.id }}</td>
        <td>{{ p.nombre }}</td>
        <td>{{ p.cantidad }}</td>
        <td>{{ p.precio }}</td>
    </tr>
    {% endfor %}
    </table>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script>
      const socket = io();

      socket.on('actualizar', () => {
        location.reload();
      });
    </script>
    {% endif %}
</body>
</html>